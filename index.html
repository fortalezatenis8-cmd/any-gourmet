<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier Gourmet | Checkout</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --brown: #4e3629; --gold: #b89356; --cream: #fdfaf6; --white: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--cream); color: #333; padding-bottom: 150px; }
        
        header { background: var(--brown); padding: 30px; text-align: center; color: white; border-bottom: 5px solid var(--gold); }
        header h1 { font-family: 'Playfair Display', serif; font-size: 1.8rem; }

        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .category-title { font-family: 'Playfair Display', serif; font-size: 1.6rem; margin: 30px 0 15px; color: var(--brown); border-bottom: 2px solid var(--gold); }

        .grid-doces { display: grid; grid-template-columns: 1fr; gap: 10px; margin-bottom: 20px; }
        .card-doce { background: var(--white); border-radius: 12px; padding: 15px; border: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
        .selector { display: flex; align-items: center; gap: 15px; }
        .btn-math { background: var(--brown); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; }
        .qty-num { font-weight: 600; font-size: 1.2rem; min-width: 25px; text-align: center; }

        /* FORMUL√ÅRIO DE DADOS - ESSENCIAL PARA O ENVIO */
        .checkout-box { background: #fff; padding: 25px; border-radius: 15px; border: 2px solid var(--gold); margin-top: 40px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .checkout-box h3 { font-family: 'Playfair Display', serif; color: var(--brown); margin-bottom: 20px; text-align: center; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 600; font-size: 0.85rem; margin-bottom: 5px; color: var(--brown); }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; font-family: 'Poppins', sans-serif; }

        .footer-fixo { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 20px; border-top: 3px solid var(--gold); display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
        .total-box { font-size: 1.4rem; font-weight: 700; color: var(--brown); }
        .btn-whatsapp { background: #25d366; color: white; padding: 15px 25px; border-radius: 50px; border: none; font-weight: 700; cursor: pointer; }
    </style>
</head>
<body>

<header>
    <h1>Atelier Gourmet</h1>
    <p>Sabores de Luxo</p>
</header>

<div class="container">
    <div class="category-title">Tradicionais</div>
    <div id="grid-tradicional" class="grid-doces"></div>

    <div class="category-title">Especiais</div>
    <div id="grid-especial" class="grid-doces"></div>

    <div class="category-title">Premium</div>
    <div id="grid-premium" class="grid-doces"></div>

    <div class="checkout-box">
        <h3>Informa√ß√µes de Entrega</h3>
        <div class="form-group">
            <label>Nome da Cliente:</label>
            <input type="text" id="nome_cliente" placeholder="Digite seu nome">
        </div>
        <div class="form-group">
            <label>Telefone de Contato:</label>
            <input type="tel" id="tel_cliente" placeholder="(00) 00000-0000">
        </div>
        <div class="form-group">
            <label>Endere√ßo (Rua e N√∫mero):</label>
            <input type="text" id="end_rua" placeholder="Ex: Rua das Flores, 123">
        </div>
        <div style="display: flex; gap: 10px;">
            <div class="form-group" style="flex: 1;">
                <label>Bairro:</label>
                <input type="text" id="end_bairro" placeholder="Seu bairro">
            </div>
            <div class="form-group" style="flex: 1;">
                <label>Cidade:</label>
                <input type="text" id="end_cidade" value="Fortaleza">
            </div>
        </div>
        <div class="form-group">
            <label>M√©todo de Pagamento:</label>
            <select id="pagamento">
                <option value="Pix">Pix</option>
                <option value="Cart√£o">Cart√£o (Cr√©dito/D√©bito)</option>
                <option value="Dinheiro">Dinheiro</option>
            </select>
        </div>
    </div>
</div>

<div class="footer-fixo">
    <div class="total-box">Total: R$ <span id="total-display">0,00</span></div>
    <button class="btn-whatsapp" onclick="enviarParaWhatsApp()">ENVIAR PEDIDO</button>
</div>
    <script>
    // TABELAS DE PRE√áO EXTRA√çDAS DAS IMAGENS
    const precos = {
        tradicional: [{min: 25, p: 1.80}, {min: 20, p: 2.00}, {min: 15, p: 2.40}, {min: 12, p: 2.60}, {min: 10, p: 2.80}, {min: 8, p: 3.20}, {min: 5, p: 4.00}],
        especial: [{min: 25, p: 1.90}, {min: 20, p: 2.15}, {min: 15, p: 2.60}, {min: 12, p: 2.85}, {min: 10, p: 3.10}, {min: 8, p: 3.55}, {min: 5, p: 4.50}],
        premium: [{min: 25, p: 2.00}, {min: 20, p: 2.30}, {min: 15, p: 2.80}, {min: 12, p: 3.10}, {min: 10, p: 3.40}, {min: 8, p: 3.90}, {min: 5, p: 5.00}]
    };

    const listaProdutos = [
        { id: 1, nome: "Cacau", cat: "tradicional" }, { id: 2, nome: "Ninho", cat: "tradicional" },
        { id: 3, nome: "Morango", cat: "tradicional" }, { id: 4, nome: "Red Velvet", cat: "tradicional" },
        { id: 5, nome: "Cajuzinho", cat: "especial" }, { id: 6, nome: "Maracuj√°", cat: "especial" },
        { id: 7, nome: "Amendoim", cat: "especial" }, { id: 8, nome: "Capuccino", cat: "especial" },
        { id: 9, nome: "Churros", cat: "premium" }, { id: 10, nome: "Confete", cat: "premium" },
        { id: 11, nome: "Ferrero Rocher", cat: "premium" }, { id: 12, nome: "Ninho com Nutella", cat: "premium" },
        { id: 13, nome: "Morango com Nutella", cat: "premium" }
    ];

    let pedido = {};

    function montarLoja() {
        listaProdutos.forEach(p => {
            document.getElementById(`grid-${p.cat}`).innerHTML += `
                <div class="card-doce">
                    <span><strong>${p.nome}</strong></span>
                    <div class="selector">
                        <button class="btn-math" onclick="alterarQtd(${p.id}, -1)">-</button>
                        <span class="qty-num" id="q-${p.id}">0</span>
                        <button class="btn-math" onclick="alterarQtd(${p.id}, 1)">+</button>
                    </div>
                </div>`;
        });
    }

    function alterarQtd(id, val) {
        if (!pedido[id]) pedido[id] = { ...listaProdutos.find(x => x.id === id), qtd: 0 };
        pedido[id].qtd += val;
        if (pedido[id].qtd < 0) pedido[id].qtd = 0;
        document.getElementById(`q-${id}`).innerText = pedido[id].qtd;
        atualizarTotal();
    }

    function atualizarTotal() {
        let total = 0;
        for (let id in pedido) {
            let item = pedido[id];
            if (item.qtd >= 5) {
                let faixa = precos[item.cat].find(f => item.qtd >= f.min) || {p: 5.00};
                total += item.qtd * faixa.p;
            }
        }
        document.getElementById('total-display').innerText = total.toFixed(2).replace('.', ',');
    }

    function enviarParaWhatsApp() {
        // CAPTURA DOS DADOS DO FORMUL√ÅRIO
        const nome = document.getElementById('nome_cliente').value;
        const tel = document.getElementById('tel_cliente').value;
        const rua = document.getElementById('end_rua').value;
        const bairro = document.getElementById('end_bairro').value;
        const cidade = document.getElementById('end_cidade').value;
        const pgto = document.getElementById('pagamento').value;

        if (!nome || !rua || !bairro) {
            alert("Por favor, preencha seu NOME e ENDERE√áO antes de enviar.");
            return;
        }

        const data = new Date().toLocaleDateString('pt-BR');
        const hora = new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
        const linkMapa = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(rua + ', ' + bairro + ', ' + cidade)}`;

        let mensagem = `‚ú® *PEDIDO ATELIER GOURMET* ‚ú®\n`;
        mensagem += `üìÖ *Data:* ${data} | üïí *Hora:* ${hora}\n\n`;
        mensagem += `üë§ *CLIENTE:* ${nome}\n`;
        mensagem += `üìû *CONTATO:* ${tel}\n`;
        mensagem += `üí≥ *PAGAMENTO:* ${pgto}\n\n`;
        mensagem += `üìç *ENDERE√áO DE ENTREGA:*\n${rua}, ${bairro} - ${cidade}\n`;
        mensagem += `üîó *MAPA:* ${linkMapa}\n\n`;
        mensagem += `üõçÔ∏è *ITENS DA ENCOMENDA:* \n`;

        let temItens = false;
        for (let id in pedido) {
            let item = pedido[id];
            if (item.qtd >= 5) {
                temItens = true;
                let faixa = precos[item.cat].find(f => item.qtd >= f.min);
                mensagem += `‚Ä¢ ${item.qtd}x ${item.nome} - R$ ${(item.qtd * faixa.p).toFixed(2)}\n`;
            }
        }

        if (!temItens) return alert("Selecione pelo menos 5 unidades de algum sabor.");

        mensagem += `\nüí∞ *VALOR TOTAL: R$ ${document.getElementById('total-display').innerText}*`;
        
        // ENVIO FINAL
        window.open(`https://wa.me/5585992000433?text=${encodeURIComponent(mensagem)}`);
    }

    montarLoja();
</script>
</body>
</html>

